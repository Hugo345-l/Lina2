# ü§ñ Lina - Assistente Pessoal Multi-Agente

**Transformando a intera√ß√£o com tecnologia de reativa em proativa**

Lina √© um assistente pessoal inteligente inspirado no conceito do Jarvis do Homem de Ferro, projetado para ser uma ferramenta abrangente de apoio √† vida cotidiana. Ao inv√©s de simplesmente responder a comandos, Lina monitora contextos relevantes, antecipa necessidades, oferece insights √∫teis e executa tarefas complexas de forma aut√¥noma, sempre mantendo o usu√°rio informado e no controle das decis√µes importantes.

---

## üìö **Documenta√ß√£o Essencial**

**üö® LEITURA OBRIGAT√ìRIA**: Para compreender completamente o projeto Lina, √© fundamental ler os seguintes documentos na ordem:

1. **üìã [PLANNING.md](PLANNING.md)** - Vis√£o arquitetural completa, decis√µes tecnol√≥gicas, filosofia do projeto e evolu√ß√£o das escolhas de interface (Agent Chat UI ‚Üí Streamlit ‚Üí HTML/CSS/JS)
2. **üìù [TASK.MD](TASK.MD)** - Roadmap detalhado com 5 fases, estado atual das tarefas, e pr√≥ximos passos espec√≠ficos
3. **üó∫Ô∏è [FRONTEND_MAP.md](lina-frontend/FRONTEND_MAP.md)** - Documenta√ß√£o t√©cnica da interface, design system, customiza√ß√µes e estrutura de arquivos

Estes documentos cont√™m o contexto completo das decis√µes arquiteturais, li√ß√µes aprendidas, e detalhes t√©cnicos essenciais para entender e contribuir com o projeto.

---

## üéØ **Vis√£o Geral**

### **O que √© a Lina?**

A Lina representa uma nova abordagem para assistentes pessoais, concebida para transcender as limita√ß√µes dos assistentes tradicionais que operam apenas de forma reativa. Ela √© um sistema inteligente multi-agente capaz de gerenciar agendamentos e compromissos de forma proativa, realizar pesquisas contextuais aprofundadas, auxiliar em decis√µes de compra baseadas em prefer√™ncias aprendidas, organizar tarefas e projetos com consci√™ncia de prioridades, apoiar atividades profissionais atrav√©s de automa√ß√£o inteligente, e comunicar atrav√©s de m√∫ltiplos canais (web, WhatsApp, mobile) mantendo contexto consistente.

O diferencial fundamental da Lina est√° em sua capacidade de monitoramento cont√≠nuo e antecipa√ß√£o de necessidades. Enquanto assistentes tradicionais aguardam comandos, Lina observa padr√µes, detecta contextos relevantes, e oferece sugest√µes proativas. Por exemplo, ela pode notificar sobre emails importantes baseando-se em padr√µes hist√≥ricos, sugerir hor√°rios ideais para reuni√µes considerando a agenda completa, ou alertar sobre prazos pr√≥ximos cruzando informa√ß√µes de m√∫ltiplas fontes.

### **Filosofia e Princ√≠pios**

O projeto Lina √© fundamentado em cinco princ√≠pios essenciais que definem sua identidade e direcionam todas as decis√µes de desenvolvimento. Primeiro, o princ√≠pio da **proatividade**: a transforma√ß√£o de uma experi√™ncia reativa em colabora√ß√£o proativa, onde a tecnologia antecipa necessidades ao inv√©s de simplesmente responder a comandos. Segundo, a **intelig√™ncia contextual**: a capacidade de aprender padr√µes de comportamento, adaptar-se √†s prefer√™ncias do usu√°rio, e fornecer insights baseados em contexto hist√≥rico e situacional.

Terceiro, o compromisso com **privacidade e controle**: todos os dados permanecem localmente por padr√£o, com backup na nuvem apenas quando autorizado, garantindo que o usu√°rio mantenha controle total sobre suas informa√ß√µes pessoais. Quarto, a **efici√™ncia econ√¥mica**: desenvolvimento orientado por um or√ßamento realista de $50/m√™s, for√ßando decis√µes inteligentes sobre tecnologias e otimiza√ß√µes de custo. Quinto, a **arquitetura modular**: design preparado para crescimento org√¢nico, permitindo adi√ß√£o de novas capacidades sem refatora√ß√£o completa do sistema existente.

---

## üèóÔ∏è **Arquitetura: Sistema de Tr√™s Inst√¢ncias**

A arquitetura da Lina foi cuidadosamente projetada em tr√™s inst√¢ncias especializadas que operam de forma colaborativa, cada uma com responsabilidades distintas mas complementares. Esta separa√ß√£o permite escalabilidade, manutenibilidade e flexibilidade operacional, ao mesmo tempo que garante que cada componente possa ser otimizado para suas fun√ß√µes espec√≠ficas.

### **üé≠ Lina-Front: A Personalidade e Interface**

A Lina-Front representa a "face" do sistema - √© a personalidade que o usu√°rio conhece e com quem interage diretamente. Esta inst√¢ncia √© respons√°vel por todo o atendimento inicial, conversa√ß√£o natural, coleta de feedback e interpreta√ß√£o das necessidades do usu√°rio. Ela possui acesso a ferramentas r√°pidas e simples que permitem respostas imediatas a consultas b√°sicas, mas sua fun√ß√£o principal √© servir como intermedi√°ria inteligente entre o usu√°rio e as capacidades mais robustas do sistema.

A Lina-Front foi concebida para ser proativa, n√£o passiva. Ela monitora continuamente informa√ß√µes relevantes que podem interessar ao usu√°rio, notifica sobre eventos importantes, tira d√∫vidas e oferece sugest√µes contextuais. √â multicanal e multimodal por design, permitindo intera√ß√£o via WhatsApp, aplicativo desktop, aplicativo m√≥vel, comando de voz ou texto, garantindo que o usu√°rio possa se comunicar com Lina atrav√©s do meio mais conveniente para cada situa√ß√£o.

Um aspecto crucial da Lina-Front √© sua capacidade de formata√ß√£o e interpreta√ß√£o. Ela recebe entradas complexas do usu√°rio e as traduz em instru√ß√µes claras e estruturadas para as outras inst√¢ncias, garantindo que a comunica√ß√£o interna do sistema seja precisa e eficiente. Simultaneamente, ela recebe sa√≠das t√©cnicas das outras inst√¢ncias e as transforma em respostas naturais e compreens√≠veis para o usu√°rio.

### **üß† Lina-Memory: A Intelig√™ncia e Continuidade**

A Lina-Memory constitui o c√©rebro anal√≠tico e a mem√≥ria institucional do sistema. Esta inst√¢ncia vai muito al√©m do simples armazenamento de dados - ela √© respons√°vel por registrar n√£o apenas tudo que a Lina-Front conversou ou fez para o usu√°rio, mas tamb√©m como essas a√ß√µes foram executadas, quais estrat√©gias funcionaram ou falharam, e quanto custaram em termos de recursos computacionais e APIs.

A Lina-Memory mant√©m uma vis√£o hol√≠stica do funcionamento do sistema, gerenciando a mem√≥ria de longo prazo e fornecendo constantemente √† Lina-Front um sum√°rio atualizado das capacidades operacionais, tempos de resposta t√≠picos, status atual do sistema e outras informa√ß√µes contextuais essenciais. Isso permite que qualquer usu√°rio, mesmo sem conhecimento t√©cnico, possa simplesmente perguntar como a Lina est√° funcionando, o que ela pode fazer, quanto custa oper√°-la, e receber respostas claras e atualizadas.

Esta inst√¢ncia √© tamb√©m o motor de melhoria cont√≠nua do sistema. Ela gera dados para avalia√ß√£o de qualidade, identifica√ß√£o de oportunidades de redu√ß√£o de custos, otimiza√ß√£o de performance e aprendizado de padr√µes de uso. Atrav√©s de an√°lise cont√≠nua das intera√ß√µes, a Lina-Memory identifica quais tipos de tarefas s√£o mais frequentes, quais consomem mais recursos, e onde h√° oportunidades de automa√ß√£o ou otimiza√ß√£o.

### **üõ†Ô∏è Lina-Tools: A Execu√ß√£o e Capacidades**

A Lina-Tools representa as "m√£os" do sistema - onde a a√ß√£o acontece. Esta inst√¢ncia √© conectada aos diversos MCPs (Model Context Protocols) dos programas e servi√ßos que efetivamente executar√£o as tarefas solicitadas. Ela gerencia integra√ß√µes com Google Workspace, WhatsApp, sistema operacional, navegadores, e qualquer outra ferramenta necess√°ria para realizar as atividades requisitadas.

A Lina-Tools n√£o √© meramente um executor passivo de comandos. Ela possui capacidades de monitoramento aut√¥nomo, execu√ß√£o de tarefas recorrentes e gera√ß√£o de alertas proativos, tudo sem necessidade de a√ß√£o direta do usu√°rio. Por exemplo, ela pode monitorar emails importantes, verificar atualiza√ß√µes em projetos espec√≠ficos, ou executar rotinas de backup autom√°tico, sempre reportando atividades relevantes para o usu√°rio atrav√©s da Lina-Front.

Um aspecto fundamental da Lina-Tools √© sua comunica√ß√£o em tempo real com a Lina-Front durante a execu√ß√£o de tarefas. Enquanto processa uma solicita√ß√£o complexa, ela mant√©m o usu√°rio informado atrav√©s de mensagens como "s√≥ um instante, processando...", "posso ter autoriza√ß√£o para tal a√ß√£o?", ou "agora vou fazer tal coisa...". Esta transpar√™ncia operacional garante que o usu√°rio sempre saiba o que est√° acontecendo e mantenha controle sobre a√ß√µes sens√≠veis.

---

## üöÄ **Estado Atual do Projeto**

### **‚úÖ Funda√ß√£o S√≥lida Estabelecida (Fase 1 - Tarefas 1.1 a 1.3)**

A primeira fase do projeto Lina foi conclu√≠da com sucesso, estabelecendo uma base t√©cnica robusta que demonstra a viabilidade do conceito e fornece uma experi√™ncia de usu√°rio j√° funcional e polida. O ambiente de desenvolvimento est√° completamente configurado com Python 3.12, LangGraph/LangChain, integra√ß√£o com OpenRouter, e todas as depend√™ncias necess√°rias operacionais. A configura√ß√£o inclui SQLite preparado para WAL mode, vari√°veis de ambiente protegidas, e scripts de inicializa√ß√£o automatizada.

A **interface web moderna** representa uma vit√≥ria significativa ap√≥s uma jornada evolutiva interessante. Inicialmente planejamos usar o Agent Chat UI oficial do LangChain, migramos temporariamente para Streamlit devido a dificuldades de implementa√ß√£o, e finalmente chegamos √† solu√ß√£o ideal: uma interface web nativa em HTML/CSS/JavaScript inspirada no design do Toqan. Esta decis√£o provou ser absolutamente correta, proporcionando controle total sobre UX/UI, performance superior, debug transparente, e uma experi√™ncia profissional que rivaliza com assistentes comerciais.

O **backend LangServe** est√° operacional e respondendo de forma est√°vel no endpoint `/chat/invoke`, com configura√ß√£o CORS adequada para o frontend, respostas estruturadas separando `output` (mensagem da Lina) e `debug_info` (m√©tricas completas), integra√ß√£o com LangSmith para observabilidade, sistema de fallback de modelos, e tratamento robusto de erros. O servidor calcula automaticamente custos baseados em `config/pricing.json`, rastreia tokens de prompt e completion separadamente, e mede dura√ß√£o de execu√ß√£o com precis√£o.

O **debug panel integrado** representa um diferencial √∫nico do projeto, oferecendo transpar√™ncia operacional em tempo real que permite ao usu√°rio acompanhar exatamente como a Lina est√° funcionando. O painel exibe custo por mensagem, tokens utilizados (prompt/completion), dura√ß√£o de processamento, modelo utilizado, status de conectividade, e totais de sess√£o acumulados. Esta transpar√™ncia √© fundamental para um sistema que visa ser econ√¥mico e control√°vel.

A **personalidade base da Lina** foi implementada e est√° funcional para conversa√ß√£o natural, mantendo tom consistente, formatando respostas de forma clara, e demonstrando as bases da futura intelig√™ncia proativa. O sistema utiliza `google/gemini-2.5-flash-preview-05-20` como modelo padr√£o com temperatura 0.8, proporcionando um equil√≠brio entre criatividade e consist√™ncia.

### **üîÑ Desenvolvimento Ativo (Tarefas 1.3.1 e 1.4)**

#### **üö® PROBLEMAS CR√çTICOS IDENTIFICADOS - THREADING**

**Status (17/06/2025): SISTEMA COM FALHAS GRAVES DE PERSIST√äNCIA**

‚ùå **PROBLEMAS URGENTES DESCOBERTOS:**
- **Pickle Errors**: `unpickling stack underflow` em todas as threads no SQLite
- **Mensagens n√£o recuperadas**: `‚ö†Ô∏è Nenhuma mensagem encontrada` para todas threads
- **Hist√≥rico threads inoperante**: Clicar numa thread antiga n√£o carrega o hist√≥rico
- **Sidebar sem dados reais**: Threads listadas mas sem conte√∫do/contexto  
- **Datas/hor√°rios n√£o funcionam**: Timestamps n√£o s√£o exibidos corretamente
- **Persist√™ncia quebrada**: Reiniciar servidor perde contexto das conversas

**üîß DIAGN√ìSTICO NECESS√ÅRIO:**
1. **SQLite Checkpointer**: Problema na serializa√ß√£o/deserializa√ß√£o com LangGraph
2. **LangGraph State**: Poss√≠vel incompatibilidade com o StateGraph atual
3. **Message Storage**: Sistema de armazenamento pode estar corrompido
4. **Thread Recovery**: L√≥gica de recupera√ß√£o de threads falha completamente

#### **üßµ TAREFA 1.3.1: Sistema de Threading - PROGRESSO SIGNIFICATIVO (COM FALHAS)**

**‚úÖ CHECKPOINT 1.1: SQLite Checkpointer ‚úÖ CONCLU√çDO (16/06/2025)**
- üóÑÔ∏è **SQLite Database**: `lina-backend/lina_conversations.db` com WAL mode ativo
- üìä **Estrutura LangGraph**: MessagesState + AgentState implementado
- ‚ö° **Performance otimizada**: Cache, memory mapping e checkpoint autom√°tico
- üéØ **Base s√≥lida**: Para threads persistentes e arquitetura multi-agente

**‚úÖ CHECKPOINT 1.2: Thread ID Management ‚úÖ CONCLU√çDO (16/06/2025)**  
- üßµ **Thread ID autom√°tico**: Gera√ß√£o e gerenciamento de threads
- üîß **Configura√ß√£o LangGraph**: Thread config integrada ao sistema
- üíæ **Persist√™ncia funcional**: Conversas separadas por thread no SQLite
- üß† **Mem√≥ria de conversa**: Teste confirmado - segunda mensagem lembrou da primeira

**‚úÖ CHECKPOINT 1.3: Debug Info Enriquecido ‚úÖ CONCLU√çDO (16/06/2025)**
- üÜî **Message ID √∫nico**: Gerado para cada mensagem
- üßµ **Thread ID no debug_info**: Inclu√≠do em todas as respostas
- üìä **Estrutura preparada**: Para expans√£o multi-agente futura
- ‚úÖ **Compatibilidade**: Frontend continua funcionando perfeitamente

**‚úÖ CHECKPOINT 1.4: Endpoint Nova Thread ‚úÖ CONCLU√çDO (16/06/2025)**
- üåê **Endpoint `/chat/new-thread`**: Implementado e funcional
- üîÑ **Thread management**: Frontend mant√©m thread_id entre mensagens
- üíæ **Persist√™ncia**: Conversas separadas mantidas no SQLite
- üß† **Mem√≥ria**: Sistema lembra contexto entre mensagens

**‚úÖ CHECKPOINT 2.1: Interface Nova Conversa ‚úÖ CONCLU√çDO (16/06/2025)**
- üé® **Bot√£o "Nova Conversa"**: Visual clean com √≠cone üîÑ no header
- ‚ö° **Funcionalidade completa**: Reset thread + m√©tricas + chat visual
- ‚å®Ô∏è **Atalho Ctrl/Cmd+N**: Para nova conversa via teclado
- üì± **Responsivo**: Texto oculto em mobile (s√≥ √≠cone)
- üîÑ **Feedback visual**: Bot√£o desabilita + texto "Iniciando..."

**‚úÖ CHECKPOINT 2.2: Display de Thread Info ‚úÖ CONCLU√çDO (16/06/2025)**
- üßµ **Thread ID exibido**: Aparece no header ap√≥s primeira mensagem
- üé® **Formato user-friendly**: **"Thread"** em negrito + √∫ltimos 8 chars hex
- üîÑ **Reset autom√°tico**: Desaparece ao iniciar nova conversa
- üì± **Design integrado**: Visual discreto no header, n√£o obstrutivo
- ‚úÖ **Threading funcional**: Backend cria threads separadas no SQLite

**‚úÖ CHECKPOINT 2.3a: Se√ß√µes B√°sicas do Debug Panel ‚úÖ CONCLU√çDO (17/06/2025)**
- üé® **Debug Panel reestruturado**: Se√ß√µes colaps√≠veis funcionando perfeitamente
- üì± **Se√ß√µes organizadas**: "√öltima Mensagem", "Sess√£o Atual", "Sistema"
- üîß **Colapso/expans√£o**: Todas as se√ß√µes podem ser colapsadas/expandidas
- üíæ **Estado persistente**: Prefer√™ncias de se√ß√£o salvas no localStorage
- üéØ **Layout otimizado**: Mapeamento correto de IDs das se√ß√µes

**‚úÖ CHECKPOINT 2.3b: Hist√≥rico Expand√≠vel ‚úÖ CONCLU√çDO (17/06/2025)**
- üìù **Hist√≥rico por mensagem**: Cada mensagem individual com debug completo
- üîß **Expans√£o granular**: Click para expandir/colapsar mensagem espec√≠fica
- üìú **Scroll otimizado**: Funciona perfeitamente com se√ß√µes expandidas
- üé® **Resize handle**: Expande corretamente para a esquerda, largura persistente
- üéØ **UX perfeita**: Interface est√°vel, responsiva e funcional

**‚úÖ CHECKPOINT 2.4: L√≥gica de Reset e Tracking ‚úÖ CONCLU√çDO (17/06/2025)**
- üîÑ **Reset completo**: Fun√ß√£o `resetSession()` limpa hist√≥rico, m√©tricas e thread
- üíæ **Persist√™ncia localStorage**: Estados de expans√£o salvos e restaurados automaticamente
- üßπ **Limpeza inteligente**: Hist√≥rico e estados limpos em nova conversa
- üéØ **Thread management**: `thread_id` gerenciado corretamente no JavaScript
- ‚úÖ **Integra√ß√£o perfeita**: Reset funciona em harmonia com threading

**üîÑ PR√ìXIMOS CHECKPOINTS:**
- **3.1**: Fluxo de Nova Conversa completo
- **3.2**: Fluxo de Mensagem com Threading
- **3.3**: Persist√™ncia autom√°tica e valida√ß√£o

#### **üì± TAREFA 1.3.2: Sidebar de Threads - PARCIAL ‚úÖ UI FUNCIONAL ‚ùå BACKEND PENDENTE**

**‚úÖ INTERFACE FUNCIONANDO (17/06/2025)**
- üé® **Layout completo**: Sidebar esquerda com grupos organizados
- ‚úÖ **Colapso/expans√£o**: Bot√£o ‚óÄ colapsa, bot√£o ‚ñ∂ expande corretamente
- üéØ **Estados visuais**: "Hoje", "Ontem", "Esta Semana", "Este M√™s", "Mais Antigo"
- üí¨ **Estado vazio**: "Nenhuma conversa ainda" + bot√£o "Iniciar Primeira Conversa"
- üîß **CSS integrado**: Design system mantido, sem quebrar layout existente
- ‚ö° **JavaScript robusto**: Sem erros no console, eventos funcionais

**‚ùå INTEGRA√á√ÉO BACKEND PENDENTE**
- üîå **API `/chat/threads`**: N√£o est√° carregando threads do SQLite
- üìä **Hist√≥rico vazio**: Threads novas e antigas n√£o aparecem na sidebar
- üîÑ **Sincroniza√ß√£o**: Sidebar n√£o reflete thread ativa do chat principal
- üóÑÔ∏è **SQLite query**: Endpoint precisa implementar busca no `lina_conversations.db`

**üéØ PR√ìXIMA REVIS√ÉO:**
- Implementar endpoint backend para listar threads do SQLite
- Conectar sidebar JavaScript com API de threads
- Sincronizar thread ativa entre chat principal e sidebar
- Testar navega√ß√£o entre conversas hist√≥ricas

O backend receber√° configura√ß√£o do `SqliteSaver` do LangGraph criando arquivo `lina_conversations.db`, modifica√ß√£o do wrapper principal para adicionar par√¢metro `thread_id`, enriquecimento do `debug_info` com identificadores de thread e mensagem, e implementa√ß√£o do endpoint `POST /chat/new-thread`. O frontend ser√° atualizado com bot√£o "Nova Conversa", display de thread ID atual, reestrutura√ß√£o do debug panel em se√ß√µes "√öltima Mensagem", "Sess√£o Atual", e futuramente "Hist√≥rico Expand√≠vel" onde cada mensagem individual poder√° ser expandida mostrando request/response JSON completo, m√©tricas detalhadas, e logs de execu√ß√£o.

A **Tarefa 1.4** concentra-se na implementa√ß√£o de ferramentas b√°sicas para a Lina-Front, incluindo busca web via MCP WebSearch, calculadora para opera√ß√µes matem√°ticas, informa√ß√µes de tempo/data, e tratamento de erros avan√ßado. Estas ferramentas transformar√£o a Lina de um sistema conversacional b√°sico em um assistente capaz de executar tarefas pr√°ticas, validando o conceito de MCPs e preparando o terreno para integra√ß√µes mais complexas.

### **‚è≥ Prepara√ß√£o para Evolu√ß√£o Multi-Inst√¢ncia (Fases 2-5)**

Com a base s√≥lida estabelecida, o projeto est√° preparado para a transi√ß√£o mais significativa: a implementa√ß√£o da arquitetura multi-inst√¢ncia que diferenciar√° a Lina de assistentes tradicionais. A Fase 2 introduzir√° o design de comunica√ß√£o inter-inst√¢ncias, implementa√ß√£o das inst√¢ncias Lina-Memory e Lina-Tools, e integra√ß√£o completa das tr√™s inst√¢ncias via fluxos LangGraph.

As fases subsequentes adicionar√£o MCPs essenciais (Google Workspace, WhatsApp, Sistema Operacional), intelig√™ncia proativa com monitoramento e consci√™ncia contextual, e polimento final com otimiza√ß√£o de performance, seguran√ßa, e documenta√ß√£o. O roadmap est√° estruturado para crescimento org√¢nico, onde cada fase adiciona valor significativo enquanto mant√©m a estabilidade e funcionalidade das fases anteriores.

---

## üìÅ **Mapa do Reposit√≥rio**

```
Lina2/
‚îú‚îÄ‚îÄ üìã PLANNING.md              # Vis√£o completa e arquitetura do projeto
‚îú‚îÄ‚îÄ üìù TASK.MD                  # Roadmap detalhado com 5 fases
‚îú‚îÄ‚îÄ üìñ README.md                # Este arquivo (vis√£o geral)
‚îú‚îÄ‚îÄ ‚öôÔ∏è requirements.txt         # Depend√™ncias Python
‚îú‚îÄ‚îÄ üöÄ run_lina.bat            # Script de execu√ß√£o da Lina (Windows)
‚îú‚îÄ‚îÄ üß™ test_openrouter.py      # Teste de conectividade OpenRouter
‚îú‚îÄ‚îÄ üóÉÔ∏è .gitignore              # Arquivos ignorados pelo Git
‚îÇ
‚îú‚îÄ‚îÄ üîß lina-backend/            # Backend LangServe + LangGraph
‚îÇ   ‚îú‚îÄ‚îÄ üåê app.py              # Servidor principal (FastAPI + LangServe)
‚îÇ   ‚îú‚îÄ‚îÄ üì¶ requirements.txt    # Depend√™ncias espec√≠ficas do backend
‚îÇ   ‚îú‚îÄ‚îÄ üß™ test_backend.py     # Testes do backend
‚îÇ   ‚îú‚îÄ‚îÄ ü§ñ agents/             # Agentes inteligentes (futuramente)
‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è config/             # Configura√ß√µes e pre√ßos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üí∞ pricing.json    # Tabela de pre√ßos dos modelos
‚îÇ   ‚îî‚îÄ‚îÄ üõ†Ô∏è utils/              # Utilit√°rios e helpers
‚îÇ
‚îú‚îÄ‚îÄ üé® lina-frontend/           # Interface Web (HTML/CSS/JS)
‚îÇ   ‚îú‚îÄ‚îÄ üè† index.html          # P√°gina principal da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ üó∫Ô∏è FRONTEND_MAP.md     # Documenta√ß√£o detalhada da interface
‚îÇ   ‚îú‚îÄ‚îÄ üé® css/                # Estilos e design system
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üéØ main.css        # Design system e estilos globais
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üí¨ chat.css        # Interface de conversa√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üîç debug-panel.css # Painel de m√©tricas
‚îÇ   ‚îú‚îÄ‚îÄ ‚ö° js/                 # L√≥gica JavaScript
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üöÄ app.js          # Orquestra√ß√£o principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üí≠ chat.js         # L√≥gica do chat
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìä debug-panel.js  # Painel de debug
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üåê api.js          # Cliente HTTP para backend
‚îÇ   ‚îî‚îÄ‚îÄ üñºÔ∏è assets/            # Recursos visuais
‚îÇ       ‚îî‚îÄ‚îÄ ü§ñ lina-logo.svg   # Logo da Lina
‚îÇ
‚îî‚îÄ‚îÄ üîß venv-lina/               # Ambiente virtual Python (n√£o commitado)
```

---

## üíª **Tecnologias Utilizadas**

### **üß† Core AI/ML**
- **LangGraph + LangChain**: Framework para agentes multi-inst√¢ncia
- **OpenRouter**: Gateway para m√∫ltiplos LLMs (Gemini, Claude, GPT)
- **Gemini 2.5 Flash**: Modelo padr√£o (`google/gemini-2.5-flash-preview-05-20`)
- **LangSmith**: Observabilidade e debugging de chains

### **‚ö° Backend**
- **FastAPI + LangServe**: Servidor web de alta performance
- **SQLite + WAL**: Persist√™ncia local com backup autom√°tico
- **Python 3.12**: Linguagem principal do backend

### **üé® Frontend**
- **HTML5 + CSS3 + JavaScript**: Interface web nativa
- **Design inspirado no Tailwind UI**: Sistema de design moderno
- **Fetch API**: Comunica√ß√£o com backend
- **CSS Grid + Flexbox**: Layout responsivo

### **üîå Integra√ß√µes (Futuras)**
- **MCPs (Model Context Protocols)**: Google Workspace, WhatsApp, SO
- **OAuth2**: Autentica√ß√£o segura com servi√ßos externos
- **WebSockets**: Comunica√ß√£o em tempo real

---

## üöÄ **Como Executar**

### **üìã Pr√©-requisitos**
- Python 3.12+
- Conta no OpenRouter com API key
- Git para clonar o reposit√≥rio

### **‚öôÔ∏è Instala√ß√£o**
```bash
# 1. Clonar o reposit√≥rio
git clone <repository-url>
cd Lina2

# 2. Criar ambiente virtual
python -m venv venv-lina
venv-lina\Scripts\activate  # Windows
# source venv-lina/bin/activate  # Linux/Mac

# 3. Instalar depend√™ncias
pip install -r requirements.txt
cd lina-backend
pip install -r requirements.txt

# 4. Configurar vari√°veis de ambiente
# Criar arquivo .env na raiz do projeto:
OPENROUTER_API_KEY=your_openrouter_api_key_here
LANGCHAIN_API_KEY=your_langsmith_api_key_here  # opcional
```

### **üèÉ Execu√ß√£o**
```bash
# Op√ß√£o 1: Script automatizado (Windows) - RECOMENDADO
run_lina.bat

# Op√ß√£o 2: Manual
cd lina-backend
uvicorn app:app --reload --host 0.0.0.0 --port 8000

# Em outro terminal ou navegador:
# Abrir: http://localhost:8000/lina-frontend/
```

**üéØ O script `run_lina.bat` faz automaticamente:**
- Ativa o ambiente virtual
- Verifica se as depend√™ncias est√£o instaladas
- Inicia o servidor backend
- Abre automaticamente o navegador na interface da Lina
- Exibe URLs √∫teis (interface, playground, backend)

### **üß™ Testes**
```bash
# Teste de conectividade OpenRouter
python test_openrouter.py

# Teste do backend
cd lina-backend
python test_backend.py

# Acesso ao playground interativo
# http://localhost:8000/chat/playground/
```

---

## üí∞ **Custos e Performance**

### **üí∏ Modelo Econ√¥mico**
- **Or√ßamento MVP**: $50/m√™s
- **Modelo padr√£o**: Gemini 2.5 Flash (custo-efetivo)
- **Custo m√©dio por mensagem**: ~$0.001-0.005
- **M√©tricas em tempo real**: Sempre vis√≠veis no debug panel

### **‚ö° Performance Atual**
- **Tempo de resposta**: 1-3 segundos
- **Interface**: Responsiva e fluida
- **Debug transparente**: M√©tricas de custo, tokens e dura√ß√£o
- **Persist√™ncia**: SQLite com WAL mode

---

## üé® **Interface e UX**

### **üñ•Ô∏è Interface Web**
- **Design moderno**: Inspirado no Tailwind UI e Toqan
- **Chat intuitivo**: Mensagens do usu√°rio (azul) e Lina (cinza)
- **Debug panel**: M√©tricas em tempo real vis√≠veis ao lado
- **Responsivo**: Funciona em desktop e mobile

### **üîç Debug Panel**
```
üîç DEBUG
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚è±Ô∏è √öltima Mensagem ‚îÇ
‚îÇ TEMPO: 1.2s     ‚îÇ
‚îÇ CUSTO: $0.0012  ‚îÇ
‚îÇ TOKENS: 156     ‚îÇ
‚îÇ MODELO: gemini  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìä Sess√£o       ‚îÇ
‚îÇ TOTAL: $0.048   ‚îÇ
‚îÇ MENSAGENS: 23   ‚îÇ
‚îÇ TOKENS: 1,204   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **üé® Customiza√ß√£o**
- **Cores**: Facilmente modific√°veis via CSS variables
- **Layout**: Flex√≠vel e adapt√°vel
- **Componentes**: Modulares e reutiliz√°veis
- **Documenta√ß√£o**: Mapa completo em `FRONTEND_MAP.md`

---

## üîÆ **Roadmap e Futuro**

### **üìÖ Fases de Desenvolvimento**
1. **‚úÖ Funda√ß√£o e Interface** - Base s√≥lida com chat funcional
2. **üîÑ Arquitetura Multi-Inst√¢ncia** - Comunica√ß√£o Front-Memory-Tools
3. **üîå MCPs e Funcionalidades** - Google Workspace, WhatsApp, SO
4. **üß† Intelig√™ncia e Proatividade** - Monitoramento e aprendizado
5. **‚ú® Polimento e Otimiza√ß√£o** - Seguran√ßa, performance, documenta√ß√£o

### **üöÄ Vis√£o de Longo Prazo**
- **üé§ Interface de voz**: Conversa√ß√£o por voz natural
- **üì± App m√≥vel**: Aplicativo nativo iOS/Android
- **üè† IoT**: Integra√ß√£o com dispositivos inteligentes
- **üë• Colabora√ß√£o**: Recursos empresariais para equipes
- **üåç Global**: Distribui√ß√£o geogr√°fica e m√∫ltiplos idiomas

---

## üìö **Documenta√ß√£o**

- **üìã [PLANNING.md](PLANNING.md)**: Vis√£o completa e decis√µes arquiteturais
- **üìù [TASK.MD](TASK.MD)**: Roadmap detalhado com 5 fases
- **üó∫Ô∏è [FRONTEND_MAP.md](lina-frontend/FRONTEND_MAP.md)**: Documenta√ß√£o da interface
- **üß™ Testes**: Scripts de valida√ß√£o e health checks

---

---

**üéâ Construindo o futuro da assist√™ncia pessoal inteligente, uma conversa por vez!**
